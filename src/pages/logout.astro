---
import { authService } from "../lib/auth/authService.js";
import { SessionManager } from "../lib/auth/sessionManager.js";

// Obtener el token de sesi칩n de la cookie
const sessionToken = Astro.cookies.get("session")?.value;

// Si hay un token, cerrar sesi칩n
if (sessionToken) {
  const sessionManager = new SessionManager();
  await sessionManager.invalidateSession(sessionToken);

  // Eliminar la cookie de sesi칩n usando las opciones del SessionManager
  Astro.cookies.delete(
    "session",
    sessionManager.getCookieOptions(Astro.request)
  );
}

// Redirigir a la p치gina de login
return Astro.redirect("/login");
---
